#!/usr/bin/env ruby
#
# mof2orientdb
#
#  Import MOF information into OrientDB
#
# Copyright (c) 2013 Klaus KÃ¤mpf <kkaempf@suse.de>
#
# Licensed under the Ruby license
#

require 'rubygems'

$:.push(File.join(File.dirname(__FILE__), '..', 'lib'))

require 'mof2orientdb'

options = Mof2OrientDB::Options.new

client = Mof2OrientDB::Client.new options
client.connect
begin
  ARGV.each do |p|
    puts "Importing #{p}"
    Mof2OrientDB::Importer.new p, options.includes
  end
rescue Exception => e
  STDERR.puts "Import failed: #{e}"
  trace = $@.join("\n\t")
  STDERR.puts "At #{trace}"
ensure
  client.disconnect
end
